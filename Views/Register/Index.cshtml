
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<section class="class=" h-100 gradient-form">
    <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col">
                <div class="card card-registration my-4">
                    <div class="row g-0">
                        <div class="col-xl-6 d-none d-xl-block  d-flex align-items-center gradient-custom-2">
                            <div class="text-white px-3 py-4 p-md-5 mx-md-4">
                                <h1 class="mb-4 text-center" style="color:floralwhite">Ba Sanh</h1>
                                <p class="text-justify">
                                    <strong>Hoa tươi Ba Sanh</strong> là một cửa hàng hoa chuyên nghiệp được thành lập từ năm 2002, với kinh nghiệm hơn 20 năm trong ngành hoa. Ba Sanh luôn tự hào là địa chỉ uy tín và chất lượng để khách hàng có thể tìm thấy những bó hoa đẹp nhất cho các dịp đặc biệt của mình.
                                </p>
                                <p class="text-justify">
                                    Với sự đa dạng về mẫu mã và chủng loại hoa, cửa hàng hoa Ba Sanh đã đáp ứng nhu cầu của rất nhiều khách hàng khó tính và được đánh giá cao bởi sự chuyên nghiệp, tận tâm và chất lượng sản phẩm.
                                </p>
                                <p class="text-center">
                                    Hotline : <strong>0937.37.2400 - 03.9999.1668</strong>
                                    Địa chỉ : <strong>015 Lô A - Chung cư Lê Hồng Phong, Phường 1, Quận 10, Tp. Hồ Chí Minh</strong>
                                </p>
                            </div>
                        </div>
                        <div class="col-xl-6">
                            <div class="card-body p-md-5 text-black">
                                <h3 class="mb-5 text-uppercase text-center">Đăng ký tài khoản</h3>
                                <div class="row">
                                    <div class="col-md-6 mb-4">
                                        <div class="form-outline">
                                            <label class="form-label">Họ và tên </label>
                                            <input type="text" id="hoTen" class="form-control form-control-lg" />
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-4">
                                        <div class="form-outline">
                                            <label class="form-label">Giới tính</label><br />
                                            <div class="form-check form-check-inline mb-0 me-2">
                                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="namRadio"
                                                       value="Nam" />
                                                <label class="form-check-label" for="namRadio">Nam</label>
                                            </div>

                                            <div class="form-check form-check-inline mb-0 me-2">
                                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="nuRadio"
                                                       value="Nữ" />
                                                <label class="form-check-label" for="nuRadio">Nữ</label>
                                            </div>

                                            <div class="form-check form-check-inline mb-0">
                                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="khacRadio"
                                                       value="Khác" />
                                                <label class="form-check-label" for="khacRadio">Khác</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>





                                <div class="row">
                                    <div class="col-md-6 mb-4">
                                        <div class="form-outline">
                                            <label class="form-label">Số điện thoại</label>
                                            <input type="text" id="phone" class="form-control form-control-lg" />
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-4">
                                        <div class="form-outline">
                                            <label class="form-label">Email</label>
                                            <input type="text" id="mail" class="form-control form-control-lg" />
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-4">
                                        <div class="form-outline">
                                            <label class="form-label">Mật khẩu</label>
                                            <input type="password" id="password" class="form-control form-control-lg" />
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-4">
                                        <div class="form-outline">
                                            <label class="form-label">Nhập lại mật khẩu</label>
                                            <input type="password" id="confirmPassword" class="form-control form-control-lg" />
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-4">
                                        <label class="form-label">Địa chỉ</label>
                                        <select class="select form-control form-control-lg" name="" id="province">
                                            <option value="1">Tỉnh/Thành phố</option>
                                        </select>

                                    </div>
                                    <div class="col-md-6 mb-4">
                                        <label class="form-label"></label>
                                        <select class="select form-control form-control-lg" name="" id="district">
                                            <option value="1">Quận huyện</option>

                                        </select>

                                    </div>
                                    <div class="col-md-6 mb-4">
                                        <select class="select form-control form-control-lg" name="" id="ward">
                                            <option value="1">Phường xã</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-4">
                                        <div class="form-outline">
                                            <input type="text" id="street" class="form-control form-control-lg" />
                                        </div>
                                    </div>

                                    <div class="d-md-flex justify-content-start align-items-center justify-content-center mb-4 py-2">
                                        <div class="form-check form-check-inline mb-0 me-4">
                                            <input class="form-check-input" type="radio" name="" id=""
                                                   value="option1" />
                                            <label class="form-check-label" for="femaleGender">Tôi Đồng ý với Điều khoản & Điều kiện</label>
                                        </div>
                                    </div>
                                </div>
                                <input hidden="hidden" id="result" />
                                <div class="d-flex justify-content-center pt-3">
                                    <span class="msg-error error"></span>
                                    <div id="recaptcha" class="g-recaptcha" data-sitekey="6LfXuPMmAAAAAOq1WlEW2Z3h6wznY9hzgJTYnmuq"></div>


                                </div>
                                <div class="d-flex justify-content-center pt-3">
                                    <button class="btn btn-primary  btn-lg gradient-custom-2 mb-3" type="submit" id="btnDangKy">
                                        Đăng ký
                                    </button>

                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.26.1/axios.min.js" integrity="sha512-bPh3uwgU5qEMipS/VOmRqynnMXGGSRv+72H/N260MQeXZIK4PG48401Bsby9Nq5P5fz7hy5UGNmC/W1Z51h2GQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
    <script>
        const host = "https://provinces.open-api.vn/api/";
        var callAPI = (api) => {
            return axios.get(api)
                .then((response) => {
                    renderData(response.data, "province");
                });
        }
        callAPI('https://provinces.open-api.vn/api/?depth=1');
        var callApiDistrict = (api) => {
            return axios.get(api)
                .then((response) => {
                    renderData(response.data.districts, "district");
                });
        }
        var callApiWard = (api) => {
            return axios.get(api)
                .then((response) => {
                    renderData(response.data.wards, "ward");
                });
        }

        var renderData = (array, select) => {
            let row = ' <option disable value="">chọn</option>';
            array.forEach(element => {
                row += `<option value="${element.code}">${element.name}</option>`
            });
            document.querySelector("#" + select).innerHTML = row
        }

        $("#province").change(() => {
            callApiDistrict(host + "p/" + $("#province").val() + "?depth=2");
            printResult();
        });
        $("#district").change(() => {
            callApiWard(host + "d/" + $("#district").val() + "?depth=2");
            printResult();
        });
        $("#ward").change(() => {
            printResult();
        })

        $("#street").on("input", function () {
            printResult();
        });

        var printResult = () => {
            if ($("#district").val() != "" && $("#province").val() != "" &&
                $("#ward").val() != "" && $("#street").val() != "") {
                let result = $("#street").val() +
                    " ," + $("#ward option:selected").text() +
                    " ," + $("#district option:selected").text() + " ," +
                    $("#province option:selected").text();
                $("#result").val(result)
            }
        }


    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#btnDangKy').click(function () {
                var $captcha = $('#recaptcha'),
                    response = grecaptcha.getResponse();
                if (response.length === 0) {
                    toastr.error("Lỗi... Đăng ký không thành công.", "", {
                        timeOut: 2000,
                        progressBar: true,
                        closeButton: true
                    });
                    if (!$captcha.hasClass("error")) {
                        $captcha.addClass("error");
                    }
                } else {
                    $captcha.removeClass("error");
                    var hoTen = $('#hoTen').val();
                    var gioiTinh = $('input[name="inlineRadioOptions"]:checked').val();
                    var password = $('#password').val();
                    var confirmPassword = $('#confirmPassword').val();
                    var diaChi = $('#result').val();
                    var phone = $('#phone').val();
                    var mail = $('#mail').val();
                    var model = {
                        hoTen: hoTen,
                        gioiTinh: gioiTinh,
                        password: password,
                        phone: phone,
                        diaChi: diaChi,
                        mail: mail
                    };

                    // Kiểm tra xem các trường dữ liệu đã được điền đầy đủ chưa
                    if (!hoTen || !gioiTinh || !password || !confirmPassword || !diaChi || !phone || !mail) {
                        toastr.error("Lỗi... Vui lòng điền đầy đủ thông tin.", "", {
                            timeOut: 2000,
                            progressBar: true,
                            closeButton: true
                        });
                        return;
                    }

                    // Kiểm tra xem hai mật khẩu nhập vào có giống nhau không
                    if (password !== confirmPassword) {
                        toastr.error("Lỗi... Mật khẩu không khớp.", "", {
                            timeOut: 2000,
                            progressBar: true,
                            closeButton: true
                        });
                        return;
                    }

                    // Kiểm tra xem giới tính có hợp lệ hay không
                    if (gioiTinh !== 'Nam' && gioiTinh !== 'Nữ' && gioiTinh !== 'Khác') {
                        toastr.error("Lỗi... Vui lòng chọn giới tính hợp lệ.", "", {
                            timeOut: 2000,
                            progressBar: true,
                            closeButton: true
                        });
                        return;
                    }

                    // Gửi dữ liệu qua request POST đến action DangKyTaiKhoan trong controller
                    $.ajax({
                        url: '/Home/RegisterAccount',
                        type: 'POST',
                        data: JSON.stringify(model),
                        dataType: "json",
                        contentType: "application/json; charset=utf-8",
                        success: function (data) {
                            toastr.success("Đăng ký thành công.", "", {
                                timeOut: 2000,
                                progressBar: true,
                                closeButton: true
                            })
                            // Chuyển sang trang khác, ví dụ: trang chủ
                            window.location.href = '/';
                        },
                        error: function (error) {
                            toastr.error("Lỗi... Đăng ký thất bại.", "", {
                                timeOut: 2000,
                                progressBar: true,
                                closeButton: true
                            });
                        }
                    });
                }
            });
        });
    </script>

</section>




